{%- liquid
    assign language_direction = 'ltr'
    case request.locale.iso_code
        when 'ar', 'arc', 'dv', 'fa', 'ha', 'he', 'kwh', 'ks', 'ku', 'ps', 'ur', 'yi'
        assign language_direction = 'rtl'
    endcase
-%}  
<!doctype html>
<html class='no-js' lang='{{ request.locale.iso_code }}' dir='{{ language_direction }}'>
    <head>
        {% render 'wnw_header' %}
        <meta charset='utf-8'>
        <meta http-equiv='X-UA-Compatible' content='IE=edge'>
        <meta name='viewport' content='width=device-width,initial-scale=1'>
        <meta name='theme-color' content='{{ settings.colors_default_background }}'>  
        {%- if settings.favicon != blank -%}
            <link rel='icon' type='image/png' href='{{ settings.favicon | image_url: width: 32, height: 32 }}'>
        {%- else -%}
            <link rel='icon' href='data:,'>
        {%- endif -%}  
        <link rel='preconnect' href='https://cdn.shopify.com'>
        <link rel='preconnect' href='https://youtube.com'>  
        {%- unless settings.type_headings_font.system? and settings.type_body_font.system? -%}
            <link rel='preconnect' href='https://fonts.shopifycdn.com' crossorigin>
        {%- endunless -%}  
        <title>
            {%- if template.name == 'password' or template.name == 'gift_card' -%}
                {{ shop.name }}
            {%- else -%}
                {{ page_title }}
                {%- if current_tags %} &ndash; tagged "{{ current_tags | join: ', ' }}"{% endif -%}
                {%- if current_page != 1 %} &ndash; Page {{ current_page }}{% endif -%}
                {%- unless page_title contains shop.name %} &ndash; {{ shop.name }}{% endunless -%}
            {%- endif -%}
        </title>  
        {% if page_description %}
            <meta name='description' content='{{ page_description | escape }}'>
        {% endif %}  
        {% render 'meta-tags' %}  
        {% comment %}
        <link rel='preload' as='script' href='{{ 'theme.js' | asset_url }}'>
        <link rel='preload' as='style' href='{{ 'theme.css' | asset_url }}'>
        <link rel='preload' as='style' href='{{ 'silkecement.css' | asset_url }}'>
        <link rel='preload' as='style' href='{{ 'app.css' | asset_url }}'>  
        {% endcomment %}
        {%- unless settings.type_headings_font.system? -%}
            <link rel='preload' as='font' href='{{ settings.type_headings_font | font_url }}' type='font/woff2' crossorigin>
        {%- endunless -%}  
        {%- unless settings.type_body_font.system? -%}
            <link rel='preload' as='font' href='{{ settings.type_body_font | font_url }}' type='font/woff2' crossorigin>
        {%- endunless -%}  
        {% render 'css-variables' %}
        {% render 'js-variables' %}  
        
        {% if template contains 'index' %} 
            {% render 'homepage-critical-css' %}
        {% elsif template contains 'collection' %}
            {% render 'collection-critical-css' %}
        {% elsif template contains 'product' %}
            {% render 'product-critical-css' %}
        {% else %}
            {% render 'theme-css' %}            
        {% endif %}              
        <link rel="stylesheet" data-href="{{ 'theme.css' | asset_url }}">
        <link rel="stylesheet" data-href="{{ 'silkecement.css' | asset_url }}">
        <link rel="stylesheet" data-href="{{ 'app.css' | asset_url }}">      
        
        <script>
            if ('noModule' in HTMLScriptElement.prototype) {
                document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
            }
        </script>  
        {%- if request.design_mode or template contains 'cart' or template contains 'checkout' -%}
            {{ content_for_header }}
        {%- else -%}
            {% capture content_for_header2 %}{{ content_for_header }}{% endcapture %}
            {{ content_for_header2 | replace: ' async="async" ', ' type="lazyload_int" ' | replace: ' defer="defer" ', ' type="lazyload_int" ' | replace: " src=", " data-src="| replace: "DOMContentLoaded", "w3-DOMContentLoaded" | replace: "window.addEventListener('load', asyncLoad, false);", "window.addEventListener('w3-DOMContentLoaded', asyncLoad, false);" | replace: "addEventListener('load', prefetchAssets);", "addEventListener('w3-DOMContentLoaded', prefetchAssets);" }}
            <script>var trekkie=[];trekkie.integrations=!0;window.BOOMR={},window.BOOMR.version=true;</script>
        {%- endif -%}
        {% if content_for_header contains 'fastbundle.co' %}
            {% render 'fast_bundle_service' %}
        {% endif %}    
        {% render 'bookthatapp-widgets' %}
        {% render 'custom-css' %}
    </head>  
    <body class='{% if settings.type_headings_capitalize %}capitalize-headings{% endif %}'>
        <a class='skip-to-content-link button button--primary button--large sr-only' href='#MainContent'>
            {{ 'accessibility.skip_to_text' | t }}  
        </a>   
        <!-- Google Tag Manager (noscript) -->
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WCTMFTD"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
        <!-- End Google Tag Manager (noscript) -->      
        {%- liquid
            if template.name != 'password' and template.name != 'gift_card'
                sections 'header-group'  
                if settings.cart_flow == 'popup'
                    render 'cart-notification'
                endif
            else
                section 'header-alternate'
            endif
        -%}  
        <main id='MainContent' class='template-{{ template.name }}' role='main'>
            {{ content_for_layout }}
        </main>  
        {%- liquid
            if template.name != 'password' and template.name != 'gift_card'
                sections 'footer-group'
                sections 'overlay-group'  
                if settings.cart_flow == 'drawer' and template.name != 'cart'
                    render 'cart-drawer'
                endif
            elsif template.name == 'password'
                section 'footer-password'
            endif
        -%}  
        <loess-overlay class='overlay'></loess-overlay>  
        <script type="lazyload_int" data-src='{{ 'vendor.js' | asset_url }}'></script>
        <script type="lazyload_int" data-src='{{ 'theme.js' | asset_url }}'></script>
        <script type="lazyload_int" data-src='{{ 'custom.js' | asset_url }}'></script>
        <script type="lazyload_int" data-src='{{ 'app.js' | asset_url }}'></script>  
        <script>
            {% if settings.forced_product_one %}
                window.forcedProductOne = {{ settings.forced_product_one.selected_or_first_available_variant.id | json }};
            {% endif %}  
            {% if settings.forced_product_two %}
                window.forcedProductTwo = {{ settings.forced_product_two.selected_or_first_available_variant.id | json }};
            {% endif %}  
            {% if settings.forced_product_three %}
                window.forcedProductThree = {{ settings.forced_product_three.selected_or_first_available_variant.id | json }};
            {% endif %}
        </script>
        {% render 'app-block' %}
        <script>
            var site_nav_link_burger = true;
            document.addEventListener("DOMContentLoaded", function() {
                var icon_menu = document.querySelector('button.header-top__burger.button[aria-controls="SideBarMenu"]');
                icon_menu.addEventListener("click", function() {
                    if(site_nav_link_burger) {
                        event.preventDefault();
                        site_nav_link_burger = false;
                    }
                });
            })
        </script>        
        {% render 'wnw_footer' %}
    </body>
</html>  